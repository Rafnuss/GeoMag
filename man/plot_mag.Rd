% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot_mag.R
\name{plot_mag}
\alias{plot_mag}
\title{Interactive Visualization of Magnetic and Acceleration Data}
\usage{
plot_mag(tag, type = "magnetic", stap_id = NULL, path = NULL)
}
\arguments{
\item{tag}{A \href{https://raphaelnussbaumer.com/GeoPressureR/reference/tag_create.html}{GeoPressureR tag object } containing magnetic (and
optionally calibration) data.}

\item{type}{Character, plot type. One of "magnetic", "calib", "acceleration", "acceleration_p",
"timeseries", or "histogram".}

\item{stap_id}{Integer or vector, stationary period(s) to plot calibration fit for
(type="calib").}

\item{path}{Optional, a data frame with columns \code{start}, \code{end}, \code{stap_id}, \code{lon}, \code{lat} for
plotting reference paths in "timeseries" or "histogram" types.}
}
\value{
A plotly \code{plot_ly} object (interactive 3D/2D plot) or a ggplotly object for time
series/histogram types.
}
\description{
Provides interactive 3D and 2D plots for exploring \href{https://raphaelnussbaumer.com/GeoPressureR/reference/tag_create.html}{GeoPressureR tag object } sensor data, including
raw and calibrated magnetic data, fitted calibration ellipsoids, and (projected) acceleration
data. Color-coding by stationary period or movement state is supported. Also supports time
series and histogram error plots against reference paths.

Plot types:
\itemize{
\item \strong{"magnetic"}: Raw magnetic data in sensor frame, colored by stationary period.
\item \strong{"calib"}: Calibration points and fitted ellipsoids for selected periods.
\item \strong{"acceleration"}: Raw acceleration, colored by static/moving classification.
\item \strong{"acceleration_p"}: Projected acceleration (NED frame), with reference gravity.
\item \strong{"timeseries"}: Time series of inclination and intensity, with optional reference
path overlay.
\item \strong{"histogram"}: Histogram of errors (sample and mean per stationary period)
against reference path.
}
}
\details{
\itemize{
\item Uses the \code{scico} or \code{viridisLite} palettes for clear color separation.
\item For type "calib", if \code{stap_id} is missing, periods with min/max radii are shown.
\item For acceleration plots, static/moving state is estimated if not present.
\item For "timeseries" and "histogram" types, a reference path is required for error analysis.
}
}
\examples{
library(GeoPressureR)
withr::with_dir(system.file("extdata", package = "GeoMag"), {
  tag <- tag_create("14DM", quiet = TRUE)
  tag <- tag_label(tag, quiet = TRUE)
  tag <- geomag_calib(tag, quiet = TRUE)
})
plot_mag(tag, type = "acceleration")
plot_mag(tag, type = "magnetic")
plot_mag(tag, type = "calib")
}
